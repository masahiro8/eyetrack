(function(t){function e(e){for(var n,o,c=e[0],s=e[1],h=e[2],d=0,f=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,h||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,c=1;c<a.length;c++){var s=a[c];0!==r[s]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},r={app:0},i=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var h=0;h<c.length;h++)e(c[h]);var u=s;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0e0b":function(t,e){},"414d":function(t,e,a){},"529b":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Vid",{on:{ready:t.readyVideo}}),a("Overlay",{ref:"overlay",attrs:{src:t.src,rect:t.rect},on:{callbackPoints:t.getPoints}}),a("Eyes",{attrs:{src:t.src,rect:t.rect,points:t.points}}),a("Shoot",{on:{shoot:t.shoot}}),t.onFlash?a("div",{attrs:{id:"white"}}):t._e()],1)},i=[],o=(a("96cf"),a("89ba")),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"videoFrame"},[a("video",{ref:"video",staticClass:"video",attrs:{id:"srcVideo",playsinline:"",muted:"",autoplay:""},domProps:{muted:!0}})])},s=[],h=(a("d3b7"),a("2ef0")),u=(a("ac1f"),a("841c"),a("1276"),function(){for(var t={},e=location.search.substring(1).split("&"),a=0;e[a];a++){var n=e[a].split("=");t[n[0]]=n[1]}return t}),d=u(),f=h["has"](d,"preview"),l=f?375:window.innerWidth,g=f?812:window.innerHeight,p=(window.devicePixelRatio,{inputSize:416,scoreThreshold:.5}),v=function(t){var e={w:t.videoWidth,h:t.videoHeight},a=g/e.h,n={w:e.w*a,h:g},r=(n.w-l)/2,i=(n.h-g)/2,o={width:n.w+"px",height:n.h+"px",left:-r+"px",top:-i+"px"},c={x:r,y:i,width:n.w,height:n.h,rate:a};return t.width=n.w,t.height=n.h,t.style.width=o.width,t.style.height=o.height,t.style.left=o.left,t.style.top=o.top,console.log("this.video_window_rate",a,"this.video_size.w",e.w,"WINDOW_WIDTH",l,"size.w",n.w,"size.w - WINDOW_WIDTH",n.w-l,"left",r),{src:t,rect:c}},y={name:"vid",data:function(){return{}},mounted:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.initCamera(this.$refs.video);case 2:e=v(this.$refs.video),console.log("ready",e),this.$emit("ready",e);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{initCamera:function(t){return new Promise((function(e,a){var n=navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}});n.then((function(a){t.muted=!0,t.playsinline=!0,t.onloadedmetadata=function(t){e(!0)},t.srcObject=a})).catch((function(t){alert(t),a(!1)}))}))}}},w=y,m=(a("dad8"),a("2877")),x=Object(m["a"])(w,c,s,!1,null,"32dd9186",null),b=x.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("canvas",{ref:"image",staticClass:"overlay",attrs:{id:"image",width:t.canvas_rect.width+"px",height:t.canvas_rect.height+"px"}}),a("canvas",{ref:"overlay",staticClass:"overlay",class:t.showDetection?"show":"hide",attrs:{id:"overlay",width:t.canvas_rect.width+"px",height:t.canvas_rect.height+"px"}}),a("div",{staticClass:"btn"},[t._v(" visible "),a("input",{attrs:{type:"checkbox"},on:{change:t.toggle}})])])},D=[],I=(a("d81d"),a("4e82"),a("b680"),a("e25e"),function(t,e){return(t[e]+t[e+1]+t[e+2])/3}),M=function(t,e,a){t[e]=a.r,t[e+1]=a.g,t[e+2]=a.b,t[e+3]=a.a},O=function(t,e){for(var a=40,n=t.getImageData(e.x,e.y,e.width,e.height),r=t.createImageData(e.width,e.height),i=0;i<n.data.length;i+=4){var o=(n.data[i]+n.data[i+1]+n.data[i+2])/3;o=parseInt(o,10),o=o>a?255:0,r.data[i]=o,r.data[i+1]=o,r.data[i+2]=o,r.data[i+3]=n.data[i+3]}return r},P=function(t,e){for(var a=t.getImageData(e.x,e.y,e.width,e.height),n=t.createImageData(e.width,e.height),r=function(t,n){var r=S(a.data,e.width,t,n);r.sort((function(t,e){return t-e}));var i=r[Math.floor(r.length/2)];return i},i=4*e.width;i<a.data.length-4*e.width;i+=4)i%(4*e.width)===0?console.log("empty"):(n.data[i]=r(0,i),n.data[i+1]=r(1,i),n.data[i+2]=r(2,i),n.data[i+3]=a.data[i+3]);return n},E={WHITE:-1,EYE:-2,OTHER:1},k={WHITE:{r:255,g:255,b:255,a:255},EYE:{r:0,g:0,b:0,a:255},CLEAR:{r:255,g:255,b:255,a:255},RED:{r:255,g:0,b:0,a:255}},C=function(t,e){for(var a=10,n=t.getImageData(e.x,e.y,e.width,e.height),r=t.createImageData(e.width,e.height),i=function(t,n){var r=I(t,n);if(255===r)return{rewrite:E.WHITE,first:n,last:n};var i=function n(r,i,o){var c={top:r-4*e.width,bottom:r+4*e.width,left:r-4,right:r+4},s=I(t,r),h=c[o],u=i+1;return i>a?{depth:i,last:r}:255===s?{depth:i,last:r}:n(h,u,o)},o=i(n,0,"right"),c=i(n,0,"left"),s=i(n,0,"top"),h=i(n,0,"bottom");return o.depth<a&&c.depth<a&&s.depth<a&&h.depth<a?{rewrite:E.OTHER,first:n,last:o}:{rewrite:E.EYE,first:n,last:o}},o=0;o<n.data.length;o+=4){var c=i(n.data,o);c.rewrite===E.WHITE?M(r.data,o,k.WHITE):c.rewrite===E.EYE?M(r.data,o,k.EYE):M(r.data,o,k.CLEAR)}return r},R=function(t,e){for(var a=5,n=t.getImageData(e.x,e.y,e.width,e.height),r=t.createImageData(e.width,e.height),i=0;i<n.data.length;i++)r.data[i]=n.data[i];var o=function(t,e,n){var r=function n(r,i){var o=r+4*e.width,c=I(t,o),s=i+1;return i>a?{result:!1,depth:i}:255===c?{result:!0,depth:i}:n(o,s)};return r(n,0)},c=function(t,e,a,n){for(var r=0;r<=n;r++){var i=r*(4*e.width)+a;t[i]=255,t[i+1]=0,t[i+2]=255,t[i+3]=255}},s=function(t,e){for(var a=4,n=0;n<Math.floor(e.height/a);n++)for(var i=0;i<e.width;i++){var s=Math.floor(n*(4*e.width)+4*i),h=Math.floor((n-1)*(4*e.width)+4*i),u=I(t,s),d=I(t,h);if(255===d&&0===u){var f=o(t,e,s);f.result&&f.depth>1&&c(r.data,e,s,f.depth)}}};return s(n.data,e),r},j=function(t,e){var a=1.2,n=t.getImageData(e.x,e.y,e.width,e.height),r=t.createImageData(e.width,e.height),i={x:Math.floor(e.width/2),y:Math.floor(e.height/2)},o=function(t){var a=function a(n,r,i){var o=function(t){return{top:function(){return t+4*e.width},bottom:function(){return t-4*e.width}}},c=I(t,n),s=o(n)[i](),h=r+1;return 0===c||r>Math.floor(e.height/2)?r:a(s,h,i)},n=4*i.x,r=a(n,0,"top"),o=e.height*(4*e.width)+4*i.x,c=a(o,0,"bottom");return{top:r,bottom:c}},c=function(t,e,a){for(var r=0;r<e.height;r++)for(var i=0;i<e.width;i++){var o=Math.floor(r*(4*e.width)+4*i);i>=a.x&&i<=a.x+a.width&&r>=a.y&&r<=a.y+a.height?(t[o]=n.data[o],t[o+1]=n.data[o+1],t[o+2]=n.data[o+2],t[o+3]=n.data[o+3]):(t[o]=255,t[o+1]=255,t[o+2]=255,t[o+3]=255)}},s=o(n.data),h=s.top,u=s.bottom,d=(e.height,[{x:Math.floor(e.width/2)-Math.floor(e.height/2),y:h,width:e.height*a,height:e.height-u}]);return c(r.data,e,d[0]),r},T=function(t,e,a){for(var n=t.getImageData(e.x,e.y,e.width,e.height),r=t.createImageData(e.width,e.height),i=[],o=0;o<n.data.length;o+=4){var c=(.2126*n.data[o]+.7152*n.data[o+1]+.0722*n.data[o+2])/3;c=parseInt(c,a);var s=c*(a/255);c=255*s.toFixed(1),r.data[o]=c,r.data[o+1]=c,r.data[o+2]=c,r.data[o+3]=n.data[o+3],i.push(c)}return console.log("colors = ",h["max"](i),h["min"](i)),r},$=function(t,e){return Math.sqrt(Math.pow(t.r-e.r,2)+Math.pow(t.g-e.g,2)+Math.pow(t.b-e.b,2))},S=function(t,e,a,n){var r=n-4*e,i=n+4*e;return[t[r-4+a],t[r+a],t[r+4+a],t[n-4+a],t[n+a],t[n+4+a],t[i-4+a],t[i+a],t[i+4+a]]},V=function(t,e){for(var a=t.getImageData(e.x,e.y,e.width,e.height),n=t.createImageData(e.width,e.height),r=[],i={outlineColor:{r:0,g:255,b:128},colorDistance:1,hideline:30,showPoints:!0},o=0;o<e.height;o++)for(var c=0;c<e.width;c++){var s=Math.floor(o*(4*e.width)+4*c),h=Math.floor(o*(4*e.width)+4*(c+1)),u=Math.floor((o+1)*(4*e.width)+4*c),d={r:a.data[s],g:a.data[s+1],b:a.data[s+2]},f={r:a.data[h],g:a.data[h+1],b:a.data[h+2]},l={r:a.data[u],g:a.data[u+1],b:a.data[u+2]};n.data[s]=a.data[s],n.data[s+1]=a.data[s+1],n.data[s+2]=a.data[s+2],n.data[s+3]=a.data[s+3],c>=e.width-2||o>=e.height-2||c<=1||o<=1?(n.data[s]=255,n.data[s+1]=255,n.data[s+2]=255,n.data[s+3]=255):($(d,f)>i.colorDistance||$(d,l)>i.colorDistance)&&i.showPoints&&(n.data[s]=i.outlineColor.r,n.data[s+1]=i.outlineColor.g,n.data[s+2]=i.outlineColor.b,r.push({x:c+1,y:o+1}))}var g=function(){return n},p=function(){return r};return{getContext:g,getPoints:p}},B=(a("0e0b"),function(t,e){var a=.05,n=.07,r=function(a){return h["map"](e,(function(e){return{index:e,point:t[e]}}))},i=function(r){var i=h["map"](e,(function(e){return{index:e,point:t[e]}})),o={x:h["minBy"](i,(function(t){return t.point.x})).point.x+-a,y:h["minBy"](i,(function(t){return t.point.y})).point.y*(1-n),x2:h["maxBy"](i,(function(t){return t.point.x})).point.x+a,y2:h["maxBy"](i,(function(t){return t.point.y})).point.y*(1+n)};return o};return{get2Points:i,getPartsPoints:r}}),H=[42,43,44,45,46,47],W=[36,37,38,39,40,41],F={BW:{key:"bw",id:"ctrBW"},GRAY:{key:"gray",id:"ctrGray"},COL2:{key:"col2",id:"ctrCol2"},MEDI:{key:"median",id:"ctrMedian"},CENT:{key:"center",id:"ctrCenter"},VERT:{key:"vertical",id:"ctrVert"},HORI:{key:"horizontal",id:"ctrHori"},LINE:{key:"line",id:"ctrLine"},POIN:{key:"point",id:"ctrPoint"}},L=function(){var t={bw:!0,gray:!1,col2:!1,median:!0,center:!0,vertical:!0,horizonta:!1,line:!1,point:!1},e=[],a=function(t){e.push(t)},n=function(a,n){t[a]=n,h["map"](e,(function(e){e(t)}))},r=function(e){return t[e]};return{setCallback:a,setEffect:n,getValue:r}},N=L(),q=function(t,e,a){if(N.getValue(F.GRAY.key)){console.log("effect:gray");var n=T(t,e,10),r=T(t,a,10);t.putImageData(n,e.x,e.y),t.putImageData(r,a.x,a.y)}if(N.getValue(F.BW.key)){console.log("effect:bw");var i=O(t,e),o=O(t,a);t.putImageData(i,e.x,e.y),t.putImageData(o,a.x,a.y)}if(N.getValue(F.CENT.key)){console.log("effect:center");var c=j(t,e),s=j(t,a);t.putImageData(c,e.x,e.y),t.putImageData(s,a.x,a.y)}if(N.getValue(F.MEDI.key)){console.log("effect:median");var u=P(t,e),d=P(t,a);t.putImageData(u,e.x,e.y),t.putImageData(d,a.x,a.y),u=P(t,e),d=P(t,a),t.putImageData(u,e.x,e.y),t.putImageData(d,a.x,a.y)}if(N.getValue(F.VERT.key)){console.log("effect:vertical");var f=R(t,e),l=R(t,a);t.putImageData(f,e.x,e.y),t.putImageData(l,a.x,a.y)}if(N.getValue(F.HORI.key)){console.log("effect:horizontal");var g=C(t,e),p=C(t,a);t.putImageData(g,e.x,e.y),t.putImageData(p,a.x,a.y)}var v=function(){var n=function(t,e){return h["map"](t,(function(t){return{x:t.x+e.x,y:t.y+e.y}}))},r=V(t,e),i=V(t,a),o=r.getPoints(),c=i.getPoints();if(N.getValue(F.LINE.key)){var s=r.getContext(),u=i.getContext();t.putImageData(s,e.x,e.y),t.putImageData(u,a.x,a.y)}return{left:n(o,e),right:n(c,a)}};return{getPoints:v}},z=function(){var t=null,e=null,a=null,n={},r={},i={},c=function(n,r){return e=r,t=n,console.log("load models"),new Promise(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,faceapi.loadTinyFaceDetectorModel("/js/tiny_face_detector_model-weights_manifest.json");case 2:return t.next=4,faceapi.loadFaceLandmarkTinyModel("/js/face_landmark_68_tiny_model-weights_manifest.json");case 4:a=new faceapi.TinyFaceDetectorOptions(p),console.log("loaded models"),e();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},s=function(t,e,a){var n=t instanceof HTMLVideoElement?faceapi.getMediaDimensions(t):t,r=n.width,i=n.height;return a.map((function(t){return t.forSize(r,i)}))},h=function(t,e,a){var n=s(t,e,a),o=n.map((function(t){return t.landmarks})),c={lineWidth:2,drawLines:!0,color:"green"};faceapi.drawLandmarks(e,o,c);var h=e.getBoundingClientRect();i={x:o[0].imageWidth/h.width,y:o[0].imageHeight/h.height},r=o[0].shift,console.log("face",o[0].relativePositions,r);var u=B(o[0].relativePositions,H).get2Points(),d=B(o[0].relativePositions,W).get2Points(),f=B(o[0].relativePositions,H).getPartsPoints(),l=B(o[0].relativePositions,W).getPartsPoints(),g={x:Math.floor(h.width*u.x*i.x+r.x),y:Math.floor(h.height*u.y*i.y+r.y),width:Math.floor(h.width*u.x2*i.x-h.width*u.x*i.x),height:Math.floor(h.height*u.y2*i.y-h.height*u.y*i.y)},p={x:Math.floor(h.width*d.x*i.x+r.x),y:Math.floor(h.height*d.y*i.y+r.y),width:Math.floor(h.width*d.x2*i.x-h.width*d.x*i.x),height:Math.floor(h.height*d.y2*i.y-h.height*d.y*i.y)};return{left_eye_rect:g,right_eye_rect:p,left_eye_points:u,right_eye_points:d,left_face_eye_points:f,right_face_eye_points:l,rate:i,shift:r}},u=function(){return{points:n,shift:r,rate:i}},d=function(){return new Promise(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(i){var o,c,s,u,d,f,l,g;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,faceapi.detectSingleFace(e,a).withFaceLandmarks(!0);case 2:o=r.sent,o&&(c=h(t,e,[o]),s=c.left_eye_rect,u=c.right_eye_rect,c.left_eye_points,c.right_eye_points,d=c.left_face_eye_points,f=c.right_face_eye_points,c.rate,c.shift,console.log("eyes",d,f),n={left:d,right:f},l=q(e.getContext("2d"),s,u),g=l.getPoints(),i(g));case 4:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}())};return{init:c,getFaceEyesData:u,getEyesPoints:d}},J=z(),Y={data:function(){return{showDetection:!1,canvas_rect:{}}},mounted:function(){console.log("overlay mounted")},props:{rect:Object,src:HTMLVideoElement},methods:{toggle:function(t){this.showDetection=!this.showDetection},shoot:function(){console.log("shoot");var t={w:this.canvas_rect.width,h:this.canvas_rect.height},e={sx:this.rect.x/this.rect.rate,sy:0,sw:t.w/this.rect.rate,sh:t.h/this.rect.rate,dx:0,dy:0,dw:l,dh:g},a=this.$refs.overlay.getContext("2d");a.clearRect(0,0,this.canvas_rect.width,this.canvas_rect.height),a.save(),a.drawImage(this.src,e.sx,e.sy,e.sw,e.sh,0,0,e.dw,e.dh),a.restore();var n=this.$refs.image.getContext("2d");n.clearRect(0,0,this.canvas_rect.width,this.canvas_rect.height),n.save(),n.drawImage(this.src,e.sx,e.sy,e.sw,e.sh,0,0,e.dw,e.dh),n.restore(),this.faceDetect()},pix:function(t){return t+"px"},faceDetect:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,J.getEyesPoints();case 2:e=t.sent,a=J.getFaceEyesData(),n=this.rect.width-2*this.rect.x,this.canvas_rect={width:n,height:this.rect.height},console.log("faceDetect"),this.$emit("callbackPoints",e,a);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},watch:{src:{immediate:!0,handler:function(t,e){t!==e&&(this.src=t,J.init(this.$refs.image,this.$refs.overlay))}},rect:{immediate:!0,handler:function(t,e){if(t!==e&&this.$refs.overlay){var a=t.width-2*t.x;this.canvas_rect={width:a,height:t.height}}}}}},A=Y,G=(a("c6fc"),Object(m["a"])(A,_,D,!1,null,"629ebacb",null)),U=G.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn",on:{click:t.shoot}},[t._v("shoot")])},Q=[],X={data:function(){return{}},methods:{shoot:function(){this.$emit("shoot")}}},Z=X,tt=(a("a254"),Object(m["a"])(Z,K,Q,!1,null,"782f7a9d",null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("canvas",{ref:"canvas",staticClass:"overlay",attrs:{width:t.canvas_rect.width+"px",height:t.canvas_rect.height+"px"}})])},nt=[],rt=(a("b64b"),function(t){for(var e=[],a=h["maxBy"](t,(function(t){return t.x})).x,n=h["minBy"](t,(function(t){return t.x})).x,r=h["maxBy"](t,(function(t){return t.y})).y,i=h["minBy"](t,(function(t){return t.y})).y,o=(a-n)/2,c=0;c<t.length;c++)for(var s=t[c].x,u=t[c].y,d=function(t,e,a,n){return Math.sqrt((t-a)*(t-a)+(e-n)*(e-n))},f=i;f<r;f++)for(var l=n;l<a;l++){var g=d(s,u,l,f);g>=.8*o&&g<1.2*o&&e.push({p:l,q:f,r:g})}for(var p={},v=0;v<e.length;v++){var y=JSON.stringify(e[v]);p[y]=p[y]?p[y]+1:1}for(var w=h["invert"](p),m=[],x=Object.keys(w).length;x>Object.keys(w).length-3;x--){var b=JSON.parse(w[x]);m.push(b)}var _={p:h["sumBy"](m,"p")/m.length,q:h["sumBy"](m,"q")/m.length,r:h["sumBy"](m,"r")/m.length};return _}),it=(a("cb29"),function(t,e,a,n){var r=function t(e,n,r,i,c){var s=e.length==r+1?0:r+1;o.moveTo(Math.floor(e[r].point.x*n.width*c.x+a.x),Math.floor(e[r].point.y*n.height*c.y+a.y)),o.lineTo(Math.floor(e[s].point.x*n.width*c.x+a.x),Math.floor(e[s].point.y*n.height*c.y+a.y)),e.length==r+1?o.stroke():t(e,n,s,i,c)},i=t.getBoundingClientRect(),o=t.getContext("2d");o.strokeStyle="red",o.beginPath(),r(e,i,0,a,n)}),ot=function(t,e){t.getBoundingClientRect();var a=t.getContext("2d"),n=a.createRadialGradient(e.p,e.q,5,e.p,e.q,1.02*e.r);n.addColorStop(0,"rgba(13,13,13,0.5)"),n.addColorStop(.5,"rgba(242,172,87,0.75)"),n.addColorStop(1,"rgba(115, 110, 110, 0.65)"),a.fillStyle=n,a.beginPath(),a.arc(e.p,e.q,e.r,0,2*Math.PI),a.fill(),a.fillStyle="#ff0000",a.fillRect(e.p,e.q,1,1)},ct=function(t){var e=t.getBoundingClientRect(),a=t.getContext("2d");a.clearRect(0,0,e.width,e.height)},st={data:function(){return{canvas_rect:{}}},props:{rect:Object,src:HTMLVideoElement,points:Object},watch:{rect:{immediate:!0,deep:!0,handler:function(t,e){if(JSON.stringify(t)!==JSON.stringify(e)&&this.$refs.canvas){var a=t.width-2*t.x;this.canvas_rect={width:a,height:t.height}}}},points:{immediate:!0,deep:!0,handler:function(t,e){if(JSON.stringify(t)!==JSON.stringify(e)&&Object.keys(t).length>0){console.log("Eyes shift rate",t.shift.x,t.rate.x);var a=rt(t.eyes.left),n=rt(t.eyes.right),r=t.shift,i=t.rate;ct(this.$refs.canvas),ot(this.$refs.canvas,a),ot(this.$refs.canvas,n),it(this.$refs.canvas,t.face.left,r,i),it(this.$refs.canvas,t.face.right,r,i)}}}}},ht=st,ut=(a("8360"),Object(m["a"])(ht,at,nt,!1,null,"442eebb6",null)),dt=ut.exports,ft=function(t){return new Promise((function(e){setTimeout((function(){e()}),t)}))},lt={name:"app",data:function(){return{src:null,rect:{},points:{},onFlash:!1}},components:{Vid:b,Shoot:et,Overlay:U,Eyes:dt},mounted:function(){},methods:{readyVideo:function(t){this.rect=t.rect,this.src=t.src},shoot:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.onFlash=!0,t.next=3,ft(100);case 3:return this.$refs.overlay.shoot(),t.next=6,ft(300);case 6:this.onFlash=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getPoints:function(t,e){this.points={eyes:t,face:e.points,shift:e.shift,rate:e.rate},console.log("points",t,e)}}},gt=lt,pt=(a("5c0b"),Object(m["a"])(gt,r,i,!1,null,null,null)),vt=pt.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(vt)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var n=a("9c0c"),r=a.n(n);r.a},8360:function(t,e,a){"use strict";var n=a("f6bf"),r=a.n(n);r.a},9828:function(t,e,a){},"9c0c":function(t,e,a){},a254:function(t,e,a){"use strict";var n=a("414d"),r=a.n(n);r.a},c6fc:function(t,e,a){"use strict";var n=a("9828"),r=a.n(n);r.a},dad8:function(t,e,a){"use strict";var n=a("529b"),r=a.n(n);r.a},f6bf:function(t,e,a){}});
//# sourceMappingURL=app.85a5d98d.js.map